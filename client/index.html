<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Negocio F√°cil - SaaS & POS</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: linear-gradient(135deg, #fef3e2 0%, #fde68a 100%); min-height: 100vh; }
        .container { max-width: 1280px; margin: 0 auto; }
        .header { background: #b45309; color: white; padding: 16px; display: flex; justify-content: space-between; align-items: center; }
        .header h1 { font-size: 20px; font-weight: bold; }
        .btn { padding: 8px 16px; border: none; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600; transition: all 0.2s; }
        .btn-primary { background: #f59e0b; color: white; }
        .btn-primary:hover { background: #d97706; }
        .btn-danger { background: #dc2626; color: white; }
        .btn-danger:hover { background: #b91c1c; }
        .btn-success { background: #16a34a; color: white; }
        .btn-success:hover { background: #15803d; }
        .btn-secondary { background: #4b5563; color: white; }
        .btn-secondary:hover { background: #374151; }
        .page { display: none; }
        .page.active { display: block; }
        .login-page { background: linear-gradient(135deg, #fef3e2 0%, #fde68a 100%); min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 16px; }
        .login-card { background: white; border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); padding: 32px; width: 100%; max-width: 400px; }
        .login-card h1 { font-size: 28px; font-weight: bold; color: #92400e; margin-bottom: 8px; text-align: center; }
        .login-card .subtitle { color: #f59e0b; text-align: center; margin-bottom: 24px; }
        .form-group { margin-bottom: 16px; }
        .form-group label { display: block; margin-bottom: 4px; font-size: 14px; color: #374151; }
        .form-group input { width: 100%; padding: 10px 16px; border: 1px solid #d1d5db; border-radius: 8px; font-size: 14px; }
        .form-group input:focus { outline: none; ring: 2px; ring-color: #f59e0b; border-color: #f59e0b; }
        .form-group button { width: 100%; padding: 10px; margin-top: 8px; }
        .info-box { margin-top: 24px; padding: 16px; background: #dbeafe; border-radius: 8px; border: 1px solid #93c5fd; }
        .info-box p { font-size: 12px; color: #1e3a8a; }
        .info-box strong { color: #1e40af; }
        .main-page { background: #111827; min-height: 100vh; }
        .main-content { padding: 24px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px; }
        .card { background: #1f2937; padding: 16px; border-radius: 8px; border: 1px solid #374151; color: white; }
        .card-title { font-weight: 600; margin-bottom: 4px; }
        .card-subtitle { font-size: 12px; color: #9ca3af; }
        .product-card { display: flex; justify-content: space-between; align-items: center; }
        .product-info { flex: 1; }
        .product-name { font-weight: 600; }
        .product-details { font-size: 12px; color: #9ca3af; }
        .cart { background: #1f2937; padding: 16px; border-radius: 8px; height: fit-content; }
        .cart-title { color: white; font-size: 16px; font-weight: bold; margin-bottom: 16px; }
        .cart-items { max-height: 300px; overflow-y: auto; margin-bottom: 16px; }
        .cart-item { background: #374151; padding: 8px; border-radius: 4px; margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center; font-size: 12px; color: white; }
        .cart-total { border-top: 1px solid #4b5563; padding-top: 16px; color: white; font-size: 16px; font-weight: bold; margin-bottom: 16px; }
        .select { width: 100%; padding: 8px; background: #374151; color: white; border-radius: 8px; border: 1px solid #4b5563; margin-bottom: 16px; font-size: 12px; }
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center; }
        .modal.active { display: flex; }
        .modal-content { background: #1f2937; border-radius: 8px; padding: 24px; width: 100%; max-width: 400px; }
        .modal-title { color: white; font-size: 18px; font-weight: bold; margin-bottom: 16px; }
        .modal-form { display: flex; flex-direction: column; gap: 16px; }
        .modal-form input { padding: 10px 16px; background: #374151; color: white; border-radius: 8px; border: 1px solid #4b5563; font-size: 14px; }
        .modal-buttons { display: flex; gap: 8px; }
        .modal-buttons button { flex: 1; }
        .message { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); padding: 12px 24px; background: #22c55e; color: white; border-radius: 8px; z-index: 2000; animation: slideDown 0.3s ease-out; }
        .message.error { background: #ef4444; }
        @keyframes slideDown { from { transform: translateX(-50%) translateY(-100%); opacity: 0; } to { transform: translateX(-50%) translateY(0); opacity: 1; } }
        .pos-grid { display: grid; grid-template-columns: 1fr 300px; gap: 24px; }
        @media (max-width: 768px) { .pos-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div id="message" class="message" style="display: none;"></div>

    <!-- LOGIN PAGE -->
    <div id="loginPage" class="page active login-page">
        <div class="login-card">
            <h1>Mi Negocio F√°cil</h1>
            <p class="subtitle">Sistema SaaS & POS</p>
            <div class="form-group">
                <label>Email (vac√≠o para Admin)</label>
                <input type="email" id="loginEmail" placeholder="Email">
            </div>
            <div class="form-group">
                <label>Contrase√±a (123456 para Admin)</label>
                <input type="password" id="loginPassword" placeholder="Contrase√±a">
            </div>
            <button class="btn btn-primary" onclick="handleLogin()" style="width: 100%; padding: 10px;">Iniciar Sesi√≥n</button>
            <div class="info-box">
                <p><strong>Credenciales de Prueba:</strong></p>
                <p>Admin: Contrase√±a: 123456</p>
            </div>
        </div>
    </div>

    <!-- ADMIN PAGE -->
    <div id="adminPage" class="page main-page">
        <div class="header">
            <h1>Panel Maestro</h1>
            <button class="btn btn-danger" onclick="handleLogout()">Salir</button>
        </div>
        <div class="main-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                <h2 style="color: white; font-size: 20px; font-weight: bold;">Gesti√≥n de Clientes</h2>
                <button class="btn btn-primary" onclick="showAddClientModal()">+ Crear Cliente</button>
            </div>
            <div id="clientsList" class="grid"></div>
        </div>
    </div>

    <!-- CLIENT PAGE -->
    <div id="clientPage" class="page main-page">
        <div class="header">
            <h1>Mi Negocio</h1>
            <button class="btn btn-danger" onclick="handleLogout()">Salir</button>
        </div>
        <div class="main-content">
            <div class="grid">
                <button class="card" onclick="goToPage('posPage')" style="border: none; cursor: pointer; background: #2563eb;">
                    <div class="card-title">üõí POS</div>
                    <div class="card-subtitle">Punto de Venta</div>
                </button>
                <button class="card" onclick="goToPage('inventoryPage')" style="border: none; cursor: pointer; background: #16a34a;">
                    <div class="card-title">üì¶ Inventario</div>
                    <div class="card-subtitle">Gestionar Productos</div>
                </button>
                <button class="card" onclick="goToPage('salesPage')" style="border: none; cursor: pointer; background: #9333ea;">
                    <div class="card-title">üìä Caja</div>
                    <div class="card-subtitle">Historial de Ventas</div>
                </button>
            </div>
        </div>
    </div>

    <!-- POS PAGE -->
    <div id="posPage" class="page main-page">
        <div class="header">
            <button class="btn btn-secondary" onclick="goToPage('clientPage')">‚Üê Atr√°s</button>
            <h1>POS - Punto de Venta</h1>
            <button class="btn btn-danger" onclick="handleLogout()">Salir</button>
        </div>
        <div class="main-content">
            <div class="pos-grid">
                <div>
                    <h2 style="color: white; font-size: 18px; font-weight: bold; margin-bottom: 16px;">Productos Disponibles</h2>
                    <div id="productsList" class="grid"></div>
                </div>
                <div class="cart">
                    <div class="cart-title">Carrito</div>
                    <div id="cartItems" class="cart-items"></div>
                    <div class="cart-total">Total: Bs <span id="cartTotal">0.00</span></div>
                    <select id="paymentMethod" class="select">
                        <option>Efectivo</option>
                        <option>Pago M√≥vil</option>
                        <option>Zelle</option>
                        <option>Punto</option>
                    </select>
                    <button class="btn btn-success" onclick="checkout()" style="width: 100%;">Cobrar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- INVENTORY PAGE -->
    <div id="inventoryPage" class="page main-page">
        <div class="header">
            <button class="btn btn-secondary" onclick="goToPage('clientPage')">‚Üê Atr√°s</button>
            <h1>Inventario</h1>
            <button class="btn btn-primary" onclick="showAddProductModal()">+ Nuevo Producto</button>
        </div>
        <div class="main-content">
            <div id="inventoryList" class="grid"></div>
        </div>
    </div>

    <!-- SALES PAGE -->
    <div id="salesPage" class="page main-page">
        <div class="header">
            <button class="btn btn-secondary" onclick="goToPage('clientPage')">‚Üê Atr√°s</button>
            <h1>Caja - Historial de Ventas</h1>
            <button class="btn btn-danger" onclick="handleLogout()">Salir</button>
        </div>
        <div class="main-content">
            <div id="salesList" class="grid"></div>
        </div>
    </div>

    <!-- ADD CLIENT MODAL -->
    <div id="addClientModal" class="modal">
        <div class="modal-content">
            <div class="modal-title">Crear Cliente</div>
            <div class="modal-form">
                <input type="email" id="newClientEmail" placeholder="Email">
                <input type="password" id="newClientPassword" placeholder="Contrase√±a">
                <input type="date" id="newClientDate">
                <div class="modal-buttons">
                    <button class="btn btn-primary" onclick="addClient()">Crear</button>
                    <button class="btn btn-secondary" onclick="closeModal('addClientModal')">Cancelar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ADD PRODUCT MODAL -->
    <div id="addProductModal" class="modal">
        <div class="modal-content">
            <div class="modal-title">Crear Producto</div>
            <div class="modal-form">
                <input type="text" id="newProductName" placeholder="Nombre del producto">
                <input type="number" id="newProductPrice" placeholder="Precio">
                <input type="number" id="newProductQty" placeholder="Cantidad">
                <div class="modal-buttons">
                    <button class="btn btn-success" onclick="addProduct()">Crear</button>
                    <button class="btn btn-secondary" onclick="closeModal('addProductModal')">Cancelar</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentUser = null;
        let clients = [];
        let products = [
            { id: '1', name: 'Producto A', price: 100, quantity: 10 },
            { id: '2', name: 'Producto B', price: 200, quantity: 5 }
        ];
        let cart = [];
        let sales = [];

        function showMessage(text, type = 'success') {
            const msg = document.getElementById('message');
            msg.textContent = text;
            msg.className = 'message ' + (type === 'error' ? 'error' : '');
            msg.style.display = 'block';
            setTimeout(() => msg.style.display = 'none', 3000);
        }

        function goToPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
        }

        function handleLogin() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            if (!email && password === '123456') {
                currentUser = { role: 'admin' };
                goToPage('adminPage');
                renderClients();
            } else if (email && password) {
                currentUser = { role: 'client', email };
                goToPage('clientPage');
            } else {
                showMessage('Credenciales inv√°lidas', 'error');
            }
        }

        function handleLogout() {
            currentUser = null;
            cart = [];
            document.getElementById('loginEmail').value = '';
            document.getElementById('loginPassword').value = '';
            goToPage('loginPage');
        }

        function showAddClientModal() {
            document.getElementById('addClientModal').classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        function addClient() {
            const email = document.getElementById('newClientEmail').value;
            const password = document.getElementById('newClientPassword').value;
            const date = document.getElementById('newClientDate').value;
            if (!email || !password || !date) {
                showMessage('Completa todos los campos', 'error');
                return;
            }
            clients.push({ id: Date.now().toString(), email, password, expiryDate: date, isActive: true });
            document.getElementById('newClientEmail').value = '';
            document.getElementById('newClientPassword').value = '';
            document.getElementById('newClientDate').value = '';
            closeModal('addClientModal');
            renderClients();
            showMessage('Cliente creado');
        }

        function deleteClient(id) {
            clients = clients.filter(c => c.id !== id);
            renderClients();
            showMessage('Cliente eliminado');
        }

        function renderClients() {
            const list = document.getElementById('clientsList');
            list.innerHTML = clients.map(c => `
                <div class="card product-card">
                    <div class="product-info">
                        <div class="product-name">${c.email}</div>
                        <div class="product-details">Vencimiento: ${c.expiryDate}</div>
                    </div>
                    <button class="btn btn-danger" onclick="deleteClient('${c.id}')">Eliminar</button>
                </div>
            `).join('');
        }

        function showAddProductModal() {
            document.getElementById('addProductModal').classList.add('active');
        }

        function addProduct() {
            const name = document.getElementById('newProductName').value;
            const price = parseFloat(document.getElementById('newProductPrice').value);
            const qty = parseInt(document.getElementById('newProductQty').value);
            if (!name || !price || !qty) {
                showMessage('Completa todos los campos', 'error');
                return;
            }
            products.push({ id: Date.now().toString(), name, price, quantity: qty });
            document.getElementById('newProductName').value = '';
            document.getElementById('newProductPrice').value = '';
            document.getElementById('newProductQty').value = '';
            closeModal('addProductModal');
            renderProducts();
            renderInventory();
            showMessage('Producto creado');
        }

        function deleteProduct(id) {
            products = products.filter(p => p.id !== id);
            renderInventory();
            renderProducts();
            showMessage('Producto eliminado');
        }

        function renderProducts() {
            const list = document.getElementById('productsList');
            list.innerHTML = products.map(p => `
                <div class="card product-card">
                    <div class="product-info">
                        <div class="product-name">${p.name}</div>
                        <div class="product-details">Bs ${p.price.toFixed(2)} | Stock: ${p.quantity}</div>
                    </div>
                    <button class="btn btn-primary" onclick="addToCart('${p.id}')" ${p.quantity === 0 ? 'disabled' : ''}>Agregar</button>
                </div>
            `).join('');
        }

        function renderInventory() {
            const list = document.getElementById('inventoryList');
            list.innerHTML = products.map(p => `
                <div class="card product-card">
                    <div class="product-info">
                        <div class="product-name">${p.name}</div>
                        <div class="product-details">Precio: Bs ${p.price.toFixed(2)} | Stock: ${p.quantity}</div>
                    </div>
                    <button class="btn btn-danger" onclick="deleteProduct('${p.id}')">Eliminar</button>
                </div>
            `).join('');
        }

        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            const existing = cart.find(item => item.id === productId);
            if (existing) {
                existing.quantity++;
            } else {
                cart.push({ ...product, quantity: 1 });
            }
            renderCart();
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            renderCart();
        }

        function renderCart() {
            const items = document.getElementById('cartItems');
            const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
            document.getElementById('cartTotal').textContent = total.toFixed(2);
            items.innerHTML = cart.map(item => `
                <div class="cart-item">
                    <div>
                        <div>${item.name}</div>
                        <div style="color: #9ca3af;">${item.quantity}x Bs ${item.price.toFixed(2)}</div>
                    </div>
                    <button class="btn btn-danger" onclick="removeFromCart('${item.id}')" style="padding: 4px 8px;">√ó</button>
                </div>
            `).join('');
        }

        function checkout() {
            if (cart.length === 0) {
                showMessage('Carrito vac√≠o', 'error');
                return;
            }
            const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
            const paymentMethod = document.getElementById('paymentMethod').value;
            sales.push({
                id: Date.now().toString(),
                items: [...cart],
                total,
                paymentMethod,
                timestamp: new Date().toLocaleString()
            });
            cart = [];
            renderCart();
            renderSales();
            showMessage('Venta registrada');
        }

        function renderSales() {
            const list = document.getElementById('salesList');
            list.innerHTML = sales.map(sale => `
                <div class="card" style="border: 1px solid #374151;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <div class="product-name">Venta #${sale.id.slice(0, 8)}</div>
                        <div style="color: #f59e0b; font-weight: bold;">Bs ${sale.total.toFixed(2)}</div>
                    </div>
                    <div class="product-details">M√©todo: ${sale.paymentMethod}</div>
                    <div class="product-details">${sale.timestamp}</div>
                    <div style="margin-top: 8px; font-size: 12px; color: #d1d5db;">
                        ${sale.items.map(item => `<div>${item.quantity}x ${item.name}</div>`).join('')}
                    </div>
                </div>
            `).join('');
        }

        // Initialize
        document.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && currentUser === null) handleLogin();
        });
    </script>
</body>
</html>
